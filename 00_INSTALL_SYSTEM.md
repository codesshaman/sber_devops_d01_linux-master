# Установка сервера Ubuntu в WirtualBox

### Шаг 1. Скачивание Ubuntu 20.04.

На момент написания данного гайда требовалось установить 

Заходим на [официальный сайт](https://releases.ubuntu.com/focal/ "скачать Ubuntu 20.04") и выбираем "server install image":

![установка ubuntu](media/install_ubuntu/step_0.png)

Небольшой лайфхак: учётка школьных маков не резиновая, а образы ОС весят много. Можно изменить место сохранения файлов в браузере на папку goinfre чтобы сохранять файлы непосредственно в памяти рабочего mac-а. Настройки на примере Google Chrome:

![установка ubuntu](media/install_ubuntu/step_1.png)

Там же на goinfre мы будем разворачивать и образы виртуальных машин, в учётке им просто не будет места. Но обо всём по порядку.

Когда образ скачался, мы открываем wirtualbox и нажимаем "Создать" на вкладке "Инструменты"

В качестве имени образа можно ввести ubuntu_01, а папку обязательно выбрать на goinfre, я назвал её так же ubuntu_01:

![установка ubuntu](media/install_ubuntu/step_2.png)

Далее я выбрал 756 МБ оперативной памяти (в одном из заданий мы развернём сразу пять подобных машин, поэтому можно сразу начинать экономить оперативку), далее выбрал создать новый виртуальный жёсткий диск с типом VDI.

На следующем шаге подтвердил, что диск будет динамическим, далее убедился, что он записывается в goinfre и нажал "Создать".

Не открывая (!) созданной конфигурации я зашёл в настройки и выбрал вкладку "Дисплей". Здесь я увеличил разрешение экрана до 200%, потому как 100% на экране мака с большим разрешением - слишком мало. Если вдруг не будет хватать и двухсот, разрешение можно повысить ещё.

![установка ubuntu](media/install_ubuntu/step_3.png)

Далее я повысил число выделенных ядер до двух, потому как одного ядра для операционки обычно ну совсем мало (вкладка "система" -> "процессор"):

![установка ubuntu](media/install_ubuntu/step_4.png)

И толкьо после этих действий я запускаю установку ОС, щёлкнув на зелёную стрелочку.

### Шаг 2. Установка Ubuntu 20.04.

Как только запустилась установка нам предложат выбрать язык. Для наглядности я выбираю Русский, кто хорошо знаком с другими языками, может выбрать язык по вкусу.

![установка ubuntu](media/install_ubuntu/step_5.png)

В процессе установки моя убунта захотела обновиться, и я разрешил ей сделать это:

![установка ubuntu](media/install_ubuntu/step_6.png)

В качестве переключателя раскладки я выбрал Alt+Shift, но это дело вкуса каждого:

![установка ubuntu](media/install_ubuntu/step_7.png)

Далее я просто нажимаю "продолжить (оно же "done") до момента когда нужно подтвердить форматирование диска:

![установка ubuntu](media/install_ubuntu/step_9.png)

После нас встретит окно выбора пользователя и пароля:

![установка ubuntu](media/install_ubuntu/step_8.png)

Вводим здесь имя пользователя и самый простой пароль (я выбрал единицу), перемещаясь по строкам табом. В качетсве имени хоста сервера я выбрал ubuntu_01. В качестве имени пользователя просто указал ``user``, однако можно использовать, например, свой ник на платформе.


После запустится установка системы. Дождёмся пока она пройдёт до конца и обязательно установим SSH-сервер:

![установка ubuntu](media/install_ubuntu/step_10.png)

На установке дополнительного софта мы акцентироваться не будем, всё что нужно доустановим сами. Пропускаем этот шаг:

![установка ubuntu](media/install_ubuntu/step_11.png)

Далее ждём, пока наша система установится. Ждать придётся несколько минут.

![установка ubuntu](media/install_ubuntu/step_12.png)

После установки внизу появится строка "Перезагрузить сейчас". Нажимаем на неё и перезагружаемся.

### Шаг 3. Настройка Ubuntu 20.04.

После первого запуска вводим наш логин и пароль и попадаем в терминал TTY. Нам нужно будет произвести ещё кое-какие настройки, поэтому выключим машину, набрав в терминале

``sudo shutdown now``

Обязательно отмонтируем CD-Rom потому как глючная бубунта будет на него жаловаться (по крайней мере 20.04.5 у меня активно жаловалась на него при старте). Для этого зайдём в настройки -> система и уберём галочку с пунктов "гибкий диск" (он не нужен в принципе уже целому поколению айтишников) и "оптический диск" (тот самый образ системы, который не может примонтировать установленная система при старте):

![установка ubuntu](media/install_ubuntu/step_13.png)

Далее прокинем порты вовне чтобы мы могли подключаться к системе по SSH непосредственно из терминала хостовой машины. Какой порт открывать - написано в части, касающейся настройки SSHD (Part 8 если ничего не поменялось) задания, на данный момент это порт 2022.

Заходим во вкладку "сеть". Разворачиваем вкладку "дополнительно" в самом низу. И внизу находим кнопку "проброс портов". Делаем проброс как показано ниже:

![установка ubuntu](media/install_ubuntu/step_14.png)
